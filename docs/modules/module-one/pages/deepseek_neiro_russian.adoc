= SplitText 2.2.0

Разделяет текстовый файл на несколько меньших текстовых файлов по границам строк, ограниченным максимальным количеством строк или общим размером фрагмента. Каждый выходной разделенный файл будет содержать не более указанного количества строк или байт. Если указаны как количество строк для разделения, так и максимальный размер фрагмента, разделение произойдет при достижении любого из этих ограничений. Если первая строка фрагмента превышает максимальный размер фрагмента, эта строка будет выведена в отдельном файле, который превышает установленный максимальный размер. Этот компонент также позволяет указать, что каждый разделенный файл должен включать строки заголовка. Строки заголовка могут быть вычислены либо путем указания количества строк, которые должны составлять заголовок, либо с использованием маркера заголовка для сопоставления с прочитанными строками. Если такое сопоставление происходит, соответствующая строка будет рассматриваться как заголовок. Учтите, что при первом несовпадении маркера заголовка дальнейшие сопоставления выполняться не будут, и оставшиеся данные будут обрабатываться как обычные строки для данного фрагмента. Если после вычисления заголовка данных больше нет, результирующий фрагмент будет состоять только из строк заголовка.

[horizontal,labelwidth=25,itemwidth=75]
Ключевые слова::
split, text
Входные требования::
REQUIRED
Поддерживает конфиденциальные динамические свойства::
False

== Дополнительные детали о SplitText 2.2.0

include::additional-details.adoc[leveloffset=+1]

== Свойства

В приведенном ниже списке названия обязательных свойств выделены жирным шрифтом.

[cols='a,a,a,a,a,a,a,a',options='header',]
|===
|Имя в интерфейсе |Описание |Значение по умолчанию |Возможные значения |Конфиденциальные данные |Сервисный интерфейс |Ограничения языка выражений |Зависимости

|Line Split Count
|Количество строк, которые будут добавлены в каждый разделенный файл, исключая строки заголовка. Значение ноль требует установки Maximum Fragment Size, и количество строк не будет учитываться при определении разделений.
|
|
|Нет
|
|
|

|Maximum Fragment Size
|Максимальный размер каждого разделенного файла, включая строки заголовка. ПРИМЕЧАНИЕ: в случае, если одна строка превышает это значение (включая заголовки, если применимо), эта строка будет выведена в отдельном файле, который превышает это значение Maximum Fragment Size.
|
|
|Нет
|
|
|

|Header Line Count
|Количество строк, которые должны считаться частью заголовка; строки заголовка будут дублироваться во всех разделенных файлах.
|
|
|Нет
|
|
|

|Header Line Marker Characters
|Первый символ(ы) в строке файла данных, который обозначает строку заголовка. Это значение игнорируется, если Header Line Count не равен нулю. Первая строка, не содержащая символы маркера заголовка, и все последующие строки считаются не заголовочными.
|
|
|Нет
|
|
|

|Remove Trailing Newlines
|Удалять ли символы новой строки в конце каждого разделенного файла. Это должно быть false, если вы планируете объединять разделенные файлы позже. Если это значение установлено в 'true' и создается FlowFile, содержащий только 'пустые строки' (т.е. состоящий только из символов \r и \n), FlowFile не будет создан. Однако, если указаны строки заголовка, результирующий FlowFile никогда не будет пустым, так как он будет состоять из строк заголовка, поэтому FlowFile может быть создан, содержащий только строки заголовка.
|
|
|Нет
|
|
|

|===

=== Соображения по вычислительным ресурсам

[cols="1a,2a",options="header",]
|===
|Ресурс |Описание

|MEMORY
|FlowFile с его атрибутами хранится в памяти, а не содержимое FlowFile. Если из-за размера содержимого или настроек разделения создается много фрагментов, может потребоваться двухэтапный подход, чтобы избежать чрезмерного использования памяти.

|===

=== Связи

[cols="1a,2a",options="header",]
|===
|Имя |Описание

|splits
|Разделенные файлы будут направлены в это место назначения, если входной файл успешно разделен на 1 или более файлов.

|original
|Оригинальный входной файл будет направлен в это место назначения, если он был успешно разделен на 1 или более файлов.

|failure
|Если файл не может быть разделен по какой-либо причине, оригинальный файл будет направлен в это место назначения, и ничего не будет направлено в другие места.

|===

=== Записываемые атрибуты

[cols="1a,2a",options="header",]
|===
|Имя |Описание

|text.line.count
|Количество строк текста из оригинального FlowFile, которые были скопированы в этот FlowFile.

|fragment.size
|Количество байт из оригинального FlowFile, которые были скопированы в этот FlowFile, включая заголовок, если применимо, который дублируется в каждом разделенном FlowFile.

|fragment.identifier
|Все разделенные FlowFile, созданные из одного родительского FlowFile, будут иметь один и тот же случайно сгенерированный UUID для этого атрибута.

|fragment.index
|Число, которое указывает порядок создания разделенных FlowFile из одного родительского FlowFile.

|fragment.count
|Количество разделенных FlowFile, созданных из родительского FlowFile.

|segment.original.filename
|Имя файла родительского FlowFile.

|===

== Варианты использования
:sectnums:

== Варианты использования, включающие другие компоненты

=== Смотрите также

xref:components /org.apache.nifi.processors.standard.MergeContent[org.apache.nifi.processors.standard.MergeContent]